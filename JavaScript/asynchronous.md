# ë¹„ë™ê¸°(Asynchronous)

## 1. ë™ê¸°(Synchronous)ì™€ ë¹„ë™ê¸°(Asynchronous)

## 1.1. ë™ê¸°

ë™ê¸°ëž€ ìˆœì„œëŒ€ë¡œ í•œë²ˆì— í•˜ë‚˜ì˜ ìž‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ê³ , ìžë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë™ê¸°ì  ì–¸ì–´ì´ë‹¤.

ë™ê¸°ëŠ” ë‹¤ë¥¸ ë§ë¡œ 'ì‹±ê¸€ ìŠ¤ë ˆë“œ'ë¼ê³ ë„ ë¶€ë¥´ëŠ”ë° ì´ëŠ” í•˜ë‚˜ì˜ Call Stacktë§Œì„ ê°€ì§€ê³  ìžˆìŒì„ ì˜ë¯¸í•œë‹¤.

ì´ëŸ¬í•œ ë™ìž‘ì€ *Memory Heap*ê³¼ *Call Stack*ìœ¼ë¡œ ì´ë£¨ì–´ì§„ *ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„*ìœ¼ë¡œë¶€í„° ë¹„ë¡¯ëœë‹¤.

> **ë™ìž‘ ì›ë¦¬**
>
> 1. ì½”ë“œê°€ ì‹¤í–‰ë˜ë©´ ìˆœì„œëŒ€ë¡œ Call Stackì— ì‹¤í–‰í•  í•¨ìˆ˜ê°€ ìŒ“ì¸ë‹¤.
> 2. ìŒ“ì¸ ë°˜ëŒ€ ìˆœì„œë¡œ ì½”ë“œê°€ ì‹¤í–‰ëœë‹¤(Last In First Out).
> 3. ì‹¤í–‰ì´ ëœ ì½”ë“œëŠ” Call Stackì—ì„œ ì œê±°ëœë‹¤.

## 1.2. ë¹„ë™ê¸°

ìžë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë™ê¸°ì‹ìœ¼ë¡œ ë™ìž‘í•˜ì§€ë§Œ ë¹„ë™ê¸°ì  ìž‘ì—…ì´ í•„ìš”í•˜ë‹¤. íŠ¹ížˆ ìžë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì›¹ ì‚¬ì´íŠ¸ì—ì„œ ë™ìž‘í•˜ë ¤ë©´ ë¹ ë¥¸ ë°˜ì‘ì„ ìœ„í•´ ë¹„ë™ê¸°ì  ìž‘ì—…ì´ í•„ìˆ˜ì ì´ë‹¤.

ì´ëŸ¬í•œ ë¹„ë™ê¸° ë™ìž‘ì€ **ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰í™˜ê²½(ëŸ°íƒ€ìž„)**ìœ¼ë¡œë¶€í„° ê°€ëŠ¥í•´ì§„ë‹¤. ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰í™˜ê²½ì—ì„œëŠ” DOM, AJAXê°™ì€ ë¹„ë™ê¸°ì  ì²˜ë¦¬ë¥¼ ìœ„í•œ **Web API**ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì´ë‹¤.

> **ë™ìž‘ ì›ë¦¬**
>
> 1. Call Stackì—ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ Call Stackì— ë¨¼ì € ìŒ“ì˜€ë‹¤ê°€ Web APIë¡œ ì´ë™í•œ í›„ í•´ë‹¹ í•¨ìˆ˜ê°€ ë“±ë¡ë˜ê³  Call Stackì—ì„œ ì‚¬ë¼ì§„ë‹¤.
> 2. Web APIì—ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ì˜ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´, í•´ë‹¹ ì½œë°± í•¨ìˆ˜ëŠ” Task Queueì— ì´ë™ëœë‹¤.
> 3. ì´ì œ Call Stackì´ ë¹„ì–´ìžˆëŠ”ì§€ ì´ë²¤íŠ¸ ë£¨í”„(Event Loop)ê°€ í™•ì¸ì„ í•˜ëŠ”ë°, ë§Œì•½ ë¹„ì–´ìžˆìœ¼ë©´ Task Queueì— ìžˆëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ìˆœì„œëŒ€ë¡œ Call Stackì— ë„˜ê²¨ì¤€ë‹¤(First In First Out).
> 4. Call Stackì— ë“¤ì–´ì˜¨ í•¨ìˆ˜ëŠ” ì‹¤í–‰ì´ ë˜ê³  ì‹¤í–‰ì´ ëë‚˜ë©´ Call Stackì—ì„œ ì œê±°ëœë‹¤.

## 2. ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ë²•

### 2.1. ì½œë°±(Callback)

ì½œë°± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ìˆœì„œì— ìƒê´€ì—†ì´ í˜¸ì¶œë  ë•Œë§Œ ì›í•˜ëŠ” ë™ìž‘ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìžˆë‹¤. ì´ëŸ¬í•œ ë™ìž‘ì€ ë¹„ë™ê¸°ì  ì²˜ë¦¬ë¥¼ ê°€ëŠ¥í•˜ë„ë¡ í•œë‹¤.

### 2.2. Promise

ìžë°”ìŠ¤í¬ë¦½íŠ¸ ë¹„ë™ê¸° ì²˜ë¦¬ì— ì‚¬ìš©ë˜ëŠ” ê°ì²´ë¡œ, *ë‚´ìš©ì€ ì‹¤í–‰ë˜ì—ˆì§€ë§Œ ê²°ê³¼ë¥¼ ì•„ì§ ë°˜í™˜í•˜ì§€ ì•Šì€ ê°ì²´*ì´ë‹¤.

ì£¼ë¡œ ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ í™”ë©´ì— í‘œì‹œí•  ë•Œ ì‚¬ìš©í•œë‹¤.

ë¹„ë™ê¸° ì—°ì‚°ì´ ì¢…ë£Œëœ ì´í›„ì— ê²°ê³¼ê°’ì˜ ìƒíƒœë¥¼ pending(ëŒ€ê¸°), fullfilled(ì´í–‰), rejected(ì‹¤íŒ¨)ë¡œ ì•Œë ¤ì¤€ë‹¤.

`resolve`ì™€ `reject`ëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ìžì²´ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì½œë°±í•¨ìˆ˜ì´ë‹¤.

#### 2.2.1. Promiseì˜ 3ê°€ì§€ ìƒíƒœ

##### 2.2.1.1. pending

`new Promise`ë¥¼ í†µí•´ ë©”ì„œë“œë¥¼ ìƒì„±í•˜ëŠ” ë•Œì˜ ì´ˆê¸° ìƒíƒœì¸ "ëŒ€ê¸°" ìƒíƒœì´ë‹¤

`resolve`ì™€ `reject` ì¸ìžë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

##### 2.2.1.2. fulfilled ìƒíƒœ

`resolve`ì¸ìžë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ì¦‰ "ì„±ê³µ" ìƒíƒœì´ë‹¤.

##### 2.2.1.3. rejected

`reject`ì¸ìžë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ, ì¦‰ "ì‹¤íŒ¨" ìƒíƒœì´ë‹¤.

#### 2.2.2. Promiseë¥¼ "ì œê³µ"í•˜ëŠ” ë©”ì„œë“œ

##### 2.2.2.1. `Promise.resolve(resolve)`

`resolve(value)`ì—ì„œ valueëŠ” ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰í–ˆì„ ë•Œì˜ ë°˜í™˜ê°’ì„ ë‚˜íƒ€ë‚¸ë‹¤.

ì‹¤í–‰ ì‹œ stateëŠ” fulfilled, resultì—ëŠ” valueê°€ ë“¤ì–´ê°„ë‹¤.

##### 2.2.2.2. `Promise.reject(error)`

`reject(error)`ì˜ errorëŠ” ì‹¤í–‰ì— ì‹¤íŒ¨í–ˆì„ ë•Œì˜ ë°˜í™˜ê°’ì„ ë‚˜íƒ€ë‚¸ë‹¤.

ì‹¤í–‰ ì‹œ stateëŠ” rejected, resultì—ëŠ” errorê°€ ë“¤ì–´ê°„ë‹¤.

#### 2.2.3. Promiseë¥¼ "ì†Œë¹„"í•˜ëŠ” ë©”ì„œë“œ

##### 2.2.3.1. `Promise.then`

fullfiled ìƒíƒœê°€ ë˜ë©´ `Promise.then`ì„ í†µí•´ ì²˜ë¦¬ ê²°ê³¼ê°’ì„ ë°›ì„ ìˆ˜ ìžˆë‹¤.

##### 2.2.3.2. `Promise.catch`

rejected ìƒíƒœê°€ ë˜ë©´ `Promise.catch`ë¥¼ í†µí•´ ì²˜ë¦¬ ê²°ê³¼ê°’ì„ ë°›ì„ ìˆ˜ ìžˆë‹¤.

#### 2.2.4. ê¸°íƒ€ ë©”ì„œë“œ

##### 2.2.4.1. `Promise.finally`

Promiseì˜ ì‹¤í–‰ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ Promiseê°€ ì²˜ë¦¬ëœ í›„ ë¬´ì¡°ê±´ í•œ ë²ˆì€ ì‹¤í–‰ë˜ëŠ” ì½”ë“œì´ë‹¤.

ì²´ì´ë‹ì˜ ë§ˆì§€ë§‰ì— ìž‘ì„±í•œë‹¤.

##### 2.2.4.2. `Promise.all`

ë°°ì—´ í˜•ì‹ìœ¼ë¡œ ì¸ìžë¥¼ ë°›ì•„ í•œ ê°œ ì´ìƒì˜ Promiseë¥¼ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©í•œë‹¤.

ë°°ì—´ ë‚´ Promise ì¤‘ ì–´ëŠí•˜ë‚˜ë¼ë„ rejectë¼ë©´ `Promise.all`ì˜ ê²°ê³¼ê°’ë„ rejectë¥¼ ë°˜í™˜í•œë‹¤.

## 3. async, await

ì½œë°± í•¨ìˆ˜ë‚˜ Promiseë¥¼ ì—°ì†ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ë©´ ì´ë¥¸ë°” "ì½œë°± ì§€ì˜¥" ë˜ëŠ” "then ì§€ì˜¥"ì— ë¹ ì§ˆ ìˆ˜ ìžˆë‹¤.`async`ì™€ `await`ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.

### 3.1. `async`

ì¼ë°˜ì ì¸ í•¨ìˆ˜ ì„ ì–¸ ì•žì— `async`ë¥¼ ë¶™ì—¬ì£¼ë©´ AsyncFunction ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” í•˜ë‚˜ì˜ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì •ì˜í•  ìˆ˜ ìžˆë‹¤. ì´ ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” **Promiseë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ë¥¼ ë°˜í™˜**í•œë‹¤.

> ðŸ‘‰ì•„ëž˜ ë‘ ì½”ë“œëŠ” ë™ì¼í•œ ê²°ê³¼ë¥¼ ê°–ëŠ”ë‹¤.
>
> ```js
> async function foo() {
>   return 1;
> }
> ```
>
> ```js
> function foo() {
>   return Promise.resolve(1);
> }
> ```

### 3.2. `await`

`await`ì—°ì‚°ìžëŠ” Promiseë¥¼ ê¸°ë‹¤ë¦¬ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. ì¦‰ ë¹„ë™ê¸° ë°©ì‹ì„ ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆë„ë¡ í•´ì¤€ë‹¤.

`async`ë¡œ ì„ ì–¸ëœ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

`Promise.then`ì˜ ê¸°ëŠ¥ì„ ëŒ€ì²´í•  ìˆ˜ ìžˆë‹¤. `await`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ë…ì„± ì¸¡ë©´ì—ì„œ ìœ ë¦¬í•˜ë‹¤.

> ðŸ‘‰ì•„ëž˜ ë‘ ì½”ë“œëŠ” ë™ì¼í•œ ê²°ê³¼ë¥¼ ê°–ëŠ”ë‹¤.
>
> ```js
> async function foo() {
>   await 1;
> }
> ```
>
> ```js
> function foo() {
>   return Promise.resolve(1).then(() => undefined);
> }
> ```
