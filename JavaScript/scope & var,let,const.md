# 스코프(Scope)

## 스코프란?

스코프의 정의는 식별자 접근 규칙에 따른 유효범위이다.

식별자(변수, 함수, 클래스)에 접근할 수 있는 범위가 존재한다.

범위는 함수 또는 블록({})에 의해 나눠지고 그 범위를 스코프라고 부른다.

## 스코프 주요 규칙

1. 안쪽 스코프에서 바깥쪽 스코프로는 접근할 수 있지만 반대로는 불가능하다.
2. 스코프는 중첩이 가능하다.
3. 가장 바깥쪽의 스코프를 전역 스코프, 그 외의 스코프를 지역 스코프라고 한다.
4. 지역 변수는 전역 변수보다 더 높은 우선순위를 가진다.

## 스코프의 종류

스코프는 전역스코프와 지역스코프로 나눌 수 있고, 지역 스코프는 함수 스코프와 블록 스코프가 있다.

화살표 함수는 함수 스코프가 아니다.

# 변수

## `var` 키워드

- ES6 이전에 나온 변수 선언 방식(현재는 let 사용이 권장됨!)
- 값 재할당 가능
- 재선언 가능
- 전역 스코프, 함수 스코프

## `let` 키워드

- 변경 가능한 값을 저장하는 기억 공간
- 사용하기 전 선언 필요
- 값 재할당 가능
- 재선언 불가
- 함수 스코프, 블록 스코프

## `const` 키워드

- 변경 불가한 값을 저장하는 기억 공간
- 사용하기 전 선언 필요
- 값 재할당 불가
- 재선언 불가
- 함수 스코프, 블록 스코프

| **변수**           | **`var`** | **`let`** | **`const`** |
| :----------------- | :-------: | :-------: | :---------: |
| **global scope**   |     O     |     X     |      X      |
| **function scope** |     O     |     O     |      X      |
| **block scope**    |     X     |     O     |      O      |
| **사용 전 선언**   |  불필요   |   필요    |    필요     |
| **값 재할당**      |   가능    |   가능    |   불가능    |
| **재선언**         |   가능    |  불가능   |   불가능    |

# 스코프 관련 변수 선언 시 주의점

## 전역 객체(window)의 이해

window 객체는 브라우저에만 존재하는 객체로 브라우저의 창을 의미한다.

별개로 전역 영역을 담고 있기도 하므로, 함수 선언식으로 함수를 선언하거나 var 키워드로 변수를 선언하면 window 객체에 속해진다.

## 전역 변수는 최소화 하기

가장 바깥 스코프에 위치한 전역 변수는 어디서든 접근이 가능하고 블록 스코프를 무시한다.  
재할당, 재선언이 가능한 부분도 문제가 될 수 있다.

전역 변수를 최소화하면 의도하지 않은 로직에 의한 side effect를 줄일 수 있다.

## 선언 없는 변수 할당 금지

선언없이 변수를 할당하면 해당 변수는 var로 선언한 전역 변수처럼 취급된다.

선언없는 변수도 에러로 판단하려면 Strict Mode(`'use strict'`)를 사용하면 된다.
