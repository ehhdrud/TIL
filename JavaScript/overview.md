# 자바스크립트 개요

자바스크립트는 본래에 넷스케이프의 Brandan Eich에 의해 Mocha라는 이름으로 시작해 나중엔 LiveScript라는 이름으로 개발되었으며 최종적으로는 JavaScript라는 이름을 가지게 되었다. 유사한 두 이름은 마치 서로 관련이 있을 것 같지만 '햄'과 '햄스터'처럼 아무런 관계가 없고, Java를 개발한 썬마이크로시스템과 공동 개발을 진행하면서 당시 인기있었던 언어인 Java 열풍에 탑승하고자 했기 때문이다.

자바스크립트는 웹 브라우저에서 많이 사용하는 프로그래밍 언어로, HTML 문서를 처리할 수 있는 응용 프로그램 이외에 Script를 해석할 수 있는 엔진을 가지고 있다. [객체 기반의 언어](#1-객체-기반)이자 대표적인 [스크립트 언어](#2-스크립트-언어인터프리터-방식)로서 인터프리터 방식을 사용해 인터프리터 언어라고도 칭해지며, [이벤트 중심 프로그래밍 언어](#이벤트-중심-프로그래밍-언어)이다. 또한 [ECMAScript](#ecmascript)를 사양을 준수하는 범용 언어이다. 그리고 느슨한 타입의 동적 언어로서 자바스크립트의 변수는 어떤 특정 타입과 연결되지 않으며, 모든 타입의 값으로 할당 및 재할당이 가능하다.

## 1. 객체 기반 스크립트 언어

### 1.1 객체 기반

자바스크립트는 객체 기반의 언어로, 여기서 객체 기반이라 함은 추상자료형의 객체를 정의하여 쓸 수 있다는 것을 의미한다. 자바스크립트의 거의 모든 것은 객체라고 봐도 무방한데, 원시타입(Primitives)를 제외한 나머지 값(함수, 배열, 정규표현식 등)은 모두 객체이다. 객체란 Key-Value 형태의 **프로퍼티(Property)**를 저장하는 곳이다. 즉 객체는 프로퍼티로 구성되어있으며 이러한 프로퍼티의 Value에는 기본타입의 값이 들어가거나 다른 객체가 들어가기도 한다. 또한 함수가 포함되기도 하는데 일반 함수와 구분짓기 위해 이를 **메서드(Method)**라고 부른다. 이와 같이 객체는 **데이터를 의미하는 프로퍼티와 데이터를 참조하고 조작할 수 있는 동작을 의미하는 메서드로 구성된 집합**이다. 객체는 데이터와 그 데이터에 관련되는 동작(메서드)을 모두 포함할 수 있기 때문에 데이터와 동작을 하나의 단위로 구조화할 수 있어 유용하다.자바스크립트의 객체는 객체지향의 상속을 구현하기 위해 **프로토타입**이라고 불리는 객체의 프로퍼티와 메소드를 상속받을 수 있다. 이 프로토타입은 타 언어와 구별되는 중요한 개념이다.

>**※ 객체 지향 프로그래밍(OOP: Object-Oriented Programming)**<br/>
>
>객체 지향 프로그램을 설명하기 전에 그 이전의 패러다임을 먼저 살펴보자면 시초의 패러다임인 **순차적, 비구조적 프로그래밍**이 있다. 이름 그대로 필요한 것이 있으면 순서대로 추가해가며 구현하는 프로그래밍 방식이다. 함수라는 개념이 없다보니 **goto문**을 통해 특정 위치로 실행 순서를 변경한다. 그러나 프로그램의 규모가 커질수록 코드가 복잡해지는 한계가 드러난다.
>
>이를 개선하기 위한 새로운 패러다임은 **절차적,구조적 프로그래밍**이다. 이는 반복될 가능성이 있다면 재사용이 가능한 **함수(프로시저)**로 만들어 사용하는 프로그래밍 방식이다. 함수의 사용으로 인해 순차적, 비구조적 프로그래밍 방식에 비해 코드가 간결해지기는 했지만 여전히 개발자들을 만족시킬 수 없었고, 코드 간 유기성이 높아 확장성면에서도 유지보수가 어렵다는 단점이 존재했다.
>
>이와같은 단점을 보완하고자 나온 패러다임이 **객체 지향 프로그래밍**이다. 프로그래밍에서 필요한 **데이터**를 추상화시켜 상태와 행위를 가진 객체로 만들고 그 객체들 간의 유기적인 상호작용을 통해 로직을 구성하는 프로그래밍 방법이다. 모듈화, 캡슐화로 유지보수가 간편하고 현실 세계와의 유사성으로 코드를 이해하기도 쉽다. 또한 객체는 그 자체가 하나의 프로그램으로서 다른 프로그램에서 재사용이 가능하다.
>
>그렇다면 자바스크립트는 객체 지향 프로그래밍이라고 할 수 있을까? 자바스크립트도 객체 지향 프로그래밍이 가장 핫한 시기에 만들어졌기 때문에 영향을 받지 않을 수 없었다. 하지만 자바스크립트를 맨 처음 설계한 사람은 객체 지향 프로그래밍에 대해 회의적인 시각을 가지고 있었기 때문에 객체 지향의 개녕은 가져오되 주류 언어였던 Java와는 다른 방식으로 객체 지향 프로그래밍을 풀어냈다.복잡한 class나 설계, 추상화, 다형성 등을 만들고 싶어 하지 않았지만 Java의 문법과 패러다임은 최대한 유지하여 Java개발자들을 끌어들이고 싶어 했다. 그 결과 자바스크립트는 **class가 없는(현재는 ES6에서 추가됨) 함수형 언어를 기반으로 객체 지향 프로그래밍 맛을 느낄 수 있는 언어**라고 할 수 있다.

### 1.2. 스크립트 언어(인터프리터 방식)

스크립트 언어란 기존에 존재하는 응용 소프트웨어, 애플리케이션을 제어하는 컴퓨터 프로그래밍 언어를 가르킨다. 스크립트 언어는 그 용도에 맞게 인터프리터 방식을 사용하는데, 인터프리터 방식이란 HTML문서 안에 직접 프로그래밍 언어를 삽입하여 사용하므로 기계어로 컴파일되지 않고 별도의 번역기가 소스를 분석하여 동작하게 하는 방식을 말한다. 수정이 자주 발생하는 큰 규모의 소프트웨어에서 컴파일은 시간이 오래 소요되는 작업이므로 명령어를 한줄씩 읽어들이는 것이 효율적이다. 게시판 입력, 상품 검색, 회원 가입 등 데이터베이스 처리 작업을 수행하기 위해 주로 사용된다.

스크립트 언어는 해석을 하는 시점에 따라 두 가지 유형으로 나눌 수 있는데 클라이언트의 웹 브라우저에서 해석되어 실행되는 클라이언트용 스크립트 언어와 서버에서 해석되어 실행된 후 결과만 클라이언트로 보내는 서버 사이드 스크립트 언어가 있다. 자바스크립트는 주로 클라이언트 사이드 스크립트 언어로 사용되지만, Node.js를 활용해 서버 사이드 개발도 가능하다.

```
스크립트 언어의 특징
 1. 스크립트 언어는 컴파일 언어에 비해 단순하고 쉬운 문법 구조를 가지고 있다.
 2. 컴파일러 없이 명령어를 line-by-line으로 읽고 실행하므로 번역속도는 빠르지만, 프로그램 실행 시 매번 같은 코드를 번역해야 해서 실행 속도는 느리다.
 3. CPU의 사용 시간 낭비가 크므로 복잡한 산술 연산, 복잡한 구조의 프로그램에서는 효율적이지 않을 수 있다.
 4. 컴파일 과정이 없기 때문에 프로그램을 실행시켜야 오류를 알 수 있다..
 5. 컴파일 과정이 없기 때문에 소스코드가 그대로 실행파일이 되어 메모리에 적재된다. 그 이후 런타임 시 메모리가 명령어를 실행하기 위해 내부적으로 기계어로 변환하는 과정을 거친다.
```

## 2. 이벤트 중심 프로그래밍 언어

이벤트란 웹 브라우저가 알려주는 HTML 요소에 대한 사건의 발생을 의미한다. 자바스크립트는 이벤트에 반응하여 특정 동작을 수행할 수 있는데 이러한 점 때문에 자바스크립트를 비동기식 이벤트 중심 프로그래밍 언어라고 한다.

## 3. ECMAScript

자바스크립트가 개발되고 나서, MS에서 JScript를 개발하였다. 두 언어는 서로 호환되지 못하는 경우가 있어 크로스 브라우징 이슈가 발생하였다. 이 크로스 브라우징 이슈를 해결하기 위해 JavaScript를 표준화했는데 그게 바로 ECMAScript이다. ECMAScript는 ECMA International사의 SCMA-262기술 규격에 의해 정의, 표준화된 스크립트 프로그래밍 언어이다. 흔히 사용하는 ES5, ES6에서 숫자는 버전을 의미한다. ES5는 2009년에 발표되었고 ES6는 2015년에 발표되었다.

## 4. 자바스크립트의 동작 원리

### 4.1. 이벤트 루프(Event loop)

자바스크립트는 싱글 스레드 언어이기에 비동기적 처리가 어렵다. 그러므로 브라우저에서 대신 비동기 방식의 동시성을 지원한다.

Heap, Call Stack(Last In First Out)으로 구성된 자바스크립트 엔진과 Web API, Task Queue(First In First Out)가 이벤트 루프를 통해 동작한다.

```
동작 순서
1. 자바스크립트 함수가 Call Stack에서 쌓이면서 후입선출 방식으로 동작
2. SetTimmeout같은 비동기 작업은 Web API에 위임
3. Web API가 호출한 자바스크립트 함수는 Task Queue에서 대기
4. Call Stack이 empty상태가 되면 대기중인 함수가 선입선출 방식으로 이벤트 루프를 통해 Call Stack으로 넘어가서 동작
```

### 4.2. 실행 컨텍스트(Execution Contexts)

실행 자바스크립트 엔진이 코드를 읽고, 실행에 필요한 정보를 _종류_, *단계*에 따라 모아놓는 것이다.  
Last In Firest Out 구조의 스택을 가진다.

#### 4.2.1. 실행 컨텍스트의 종류

##### 4.2.1.1. GEC(Global Execution Contexts)

> this, Object, 선언 코드 등

코드가 전역에서 실행될 때의 환경을 말한다.

자바스크립트는 싱글 스레드 언어이기 때문에 전역 컨텍스트는 하나만 존재한다.

##### 4.2.1.2. FEC(Function Execution Contexts)

> 함수 내부의 this, 지역변수 등.

함수가 호출되어 실행될 때, 실행되는 함수에 대해서 생성되는 컨텍스트이다.

상위 컨텍스트에 접근 가능하다.

#### 4.2.2. 실행 컨텍스트의 단계

##### 4.2.2.1. Creation Phase(생성 단계)

자바스크립트 엔진이 함수를 호출했지만 실행이 시작되지 않은 단계(전역 객체 생성, 변수 생성 등)이다.

변수는 값을 할당하더라도 우선은 undefined로 초기화(호이스팅이 일어남(❗))된다.

함수는 실행되지 않고 메모리에 존재한다.

##### 4.2.2.2. Execution Phase(실행 단계)

전역 변수의 값 할당이 발생하며 코드를 실행하는 단계이다.

arguments에 접근 가능하다.

GEC에서 생성된 환경에 접근 가능하다.

만약 함수가 다른 함수 호출 시 새로운 함수의 실행 컨텍스트가 생성되며 상위 컨텍스트부터 Call Stack에 쌓이며 *스코프 체인*이 발생한다. 하위 컨텍스트는 그 상위의 컨텍스트와 GEC에 접근 가능하다.

실행 컨텐스트는 상위 컨텍스트부터 쌓인다.

> **※ 스코프 체인(Scope Chain)**
>
> 자신부터 상위 스코프로 식별자를 찾아 나가는 현상으로, 스코프가 중첩되어 있는 모든 상황에서 발생한다.
